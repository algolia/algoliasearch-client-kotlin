/**
 * Code generated by OpenAPI Generator (https://openapi-generator.tech), manual changes will be
 * lost - read more on https://github.com/algolia/api-clients-automation. DO NOT EDIT.
 */
package com.algolia.client.api

import com.algolia.client.configuration.*
import com.algolia.client.exception.*
import com.algolia.client.extensions.internal.*
import com.algolia.client.model.analytics.*
import com.algolia.client.transport.*
import com.algolia.client.transport.internal.*
import kotlin.time.Duration.Companion.milliseconds
import kotlinx.serialization.json.*

public class AnalyticsClient(
  override val appId: String,
  override var apiKey: String,
  public val region: String? = null,
  override val options: ClientOptions = ClientOptions(),
) : ApiClient {

  init {
    require(appId.isNotBlank()) { "`appId` is missing." }
    require(apiKey.isNotBlank()) { "`apiKey` is missing." }
  }

  override val requester: Requester =
    requesterOf(
      clientName = "Analytics",
      appId = appId,
      apiKey = apiKey,
      connectTimeout = 2000.milliseconds,
      readTimeout = 5000.milliseconds,
      writeTimeout = 30000.milliseconds,
      options = options,
    ) {
      val allowedRegions = listOf("de", "us")
      require(region == null || region in allowedRegions) {
        "`region` must be one of the following: ${allowedRegions.joinToString()}"
      }
      val url = if (region == null) "analytics.algolia.com" else "analytics.$region.algolia.com"
      listOf(Host(url))
    }

  /**
   * This method lets you send requests to the Algolia REST API.
   *
   * @param path Path of the endpoint, for example `1/newFeature`.
   * @param parameters Query parameters to apply to the current query.
   * @param requestOptions additional request configuration.
   */
  public suspend fun customDelete(
    path: String,
    parameters: Map<kotlin.String, Any>? = null,
    requestOptions: RequestOptions? = null,
  ): JsonObject {
    require(path.isNotBlank()) { "Parameter `path` is required when calling `customDelete`." }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.DELETE,
        path = "/{path}".replace("{path}", path),
        query = buildMap { parameters?.let { putAll(it) } },
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * This method lets you send requests to the Algolia REST API.
   *
   * @param path Path of the endpoint, for example `1/newFeature`.
   * @param parameters Query parameters to apply to the current query.
   * @param requestOptions additional request configuration.
   */
  public suspend fun customGet(
    path: String,
    parameters: Map<kotlin.String, Any>? = null,
    requestOptions: RequestOptions? = null,
  ): JsonObject {
    require(path.isNotBlank()) { "Parameter `path` is required when calling `customGet`." }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.GET,
        path = "/{path}".replace("{path}", path),
        query = buildMap { parameters?.let { putAll(it) } },
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * This method lets you send requests to the Algolia REST API.
   *
   * @param path Path of the endpoint, for example `1/newFeature`.
   * @param parameters Query parameters to apply to the current query.
   * @param body Parameters to send with the custom request.
   * @param requestOptions additional request configuration.
   */
  public suspend fun customPost(
    path: String,
    parameters: Map<kotlin.String, Any>? = null,
    body: JsonObject? = null,
    requestOptions: RequestOptions? = null,
  ): JsonObject {
    require(path.isNotBlank()) { "Parameter `path` is required when calling `customPost`." }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.POST,
        path = "/{path}".replace("{path}", path),
        query = buildMap { parameters?.let { putAll(it) } },
        body = body,
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * This method lets you send requests to the Algolia REST API.
   *
   * @param path Path of the endpoint, for example `1/newFeature`.
   * @param parameters Query parameters to apply to the current query.
   * @param body Parameters to send with the custom request.
   * @param requestOptions additional request configuration.
   */
  public suspend fun customPut(
    path: String,
    parameters: Map<kotlin.String, Any>? = null,
    body: JsonObject? = null,
    requestOptions: RequestOptions? = null,
  ): JsonObject {
    require(path.isNotBlank()) { "Parameter `path` is required when calling `customPut`." }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.PUT,
        path = "/{path}".replace("{path}", path),
        query = buildMap { parameters?.let { putAll(it) } },
        body = body,
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * Retrieves the add-to-cart rate for all your searches with at least one add-to-cart event,
   * including a daily breakdown. By default, the analyzed period includes the last eight days
   * including the current day. The rate is the number of add-to-cart conversion events divided by
   * the number of tracked searches. A search is tracked if it returns a queryID (`clickAnalytics`
   * is `true`). This differs from the response's `count`, which shows the overall number of
   * searches, including those where `clickAnalytics` is `false`. **There's a difference between a 0
   * and null add-to-cart rate when `clickAnalytics` is enabled:** - **Null** means there were no
   * queries: since Algolia didn't receive any events, the add-to-cart rate is null. - **0** mean
   * there _were_ queries but no
   * [add-to-cart events](https://www.algolia.com/doc/guides/sending-events/getting-started) were
   * received.
   *
   * Required API Key ACLs:
   * - analytics
   *
   * @param index Index name.
   * @param startDate Start date of the period to analyze, in `YYYY-MM-DD` format.
   * @param endDate End date of the period to analyze, in `YYYY-MM-DD` format.
   * @param tags Tags by which to segment the analytics. You can combine multiple tags with `OR` and
   *   `AND`. Tags must be URL-encoded. For more information, see
   *   [Segment your analytics data](https://www.algolia.com/doc/guides/search-analytics/guides/segments).
   * @param requestOptions additional request configuration.
   */
  public suspend fun getAddToCartRate(
    index: String,
    startDate: String? = null,
    endDate: String? = null,
    tags: String? = null,
    requestOptions: RequestOptions? = null,
  ): GetAddToCartRateResponse {
    require(index.isNotBlank()) { "Parameter `index` is required when calling `getAddToCartRate`." }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.GET,
        path = listOf("2", "conversions", "addToCartRate"),
        query =
          buildMap {
            put("index", index)
            startDate?.let { put("startDate", it) }
            endDate?.let { put("endDate", it) }
            tags?.let { put("tags", it) }
          },
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * Retrieves the average click position of your search results, including a daily breakdown. The
   * average click position is the average of all clicked search result positions. For example, if
   * users only ever click on the first result for any search, the average click position is 1. By
   * default, the analyzed period includes the last eight days including the current day. An average
   * of `null` when `clickAnalytics` is enabled means Algolia didn't receive any
   * [click events](https://www.algolia.com/doc/guides/sending-events/getting-started) for the
   * queries. The average is `null` until Algolia receives at least one click event.
   *
   * Required API Key ACLs:
   * - analytics
   *
   * @param index Index name.
   * @param startDate Start date of the period to analyze, in `YYYY-MM-DD` format.
   * @param endDate End date of the period to analyze, in `YYYY-MM-DD` format.
   * @param tags Tags by which to segment the analytics. You can combine multiple tags with `OR` and
   *   `AND`. Tags must be URL-encoded. For more information, see
   *   [Segment your analytics data](https://www.algolia.com/doc/guides/search-analytics/guides/segments).
   * @param requestOptions additional request configuration.
   */
  public suspend fun getAverageClickPosition(
    index: String,
    startDate: String? = null,
    endDate: String? = null,
    tags: String? = null,
    requestOptions: RequestOptions? = null,
  ): GetAverageClickPositionResponse {
    require(index.isNotBlank()) {
      "Parameter `index` is required when calling `getAverageClickPosition`."
    }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.GET,
        path = listOf("2", "clicks", "averageClickPosition"),
        query =
          buildMap {
            put("index", index)
            startDate?.let { put("startDate", it) }
            endDate?.let { put("endDate", it) }
            tags?.let { put("tags", it) }
          },
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * Retrieves the positions in the search results and their associated number of clicks. This lets
   * you check how many clicks the first, second, or tenth search results receive. An average of `0`
   * when `clickAnalytics` is enabled means Algolia didn't receive any
   * [click events](https://www.algolia.com/doc/guides/sending-events/getting-started) for the
   * queries.
   *
   * Required API Key ACLs:
   * - analytics
   *
   * @param index Index name.
   * @param startDate Start date of the period to analyze, in `YYYY-MM-DD` format.
   * @param endDate End date of the period to analyze, in `YYYY-MM-DD` format.
   * @param tags Tags by which to segment the analytics. You can combine multiple tags with `OR` and
   *   `AND`. Tags must be URL-encoded. For more information, see
   *   [Segment your analytics data](https://www.algolia.com/doc/guides/search-analytics/guides/segments).
   * @param requestOptions additional request configuration.
   */
  public suspend fun getClickPositions(
    index: String,
    startDate: String? = null,
    endDate: String? = null,
    tags: String? = null,
    requestOptions: RequestOptions? = null,
  ): GetClickPositionsResponse {
    require(index.isNotBlank()) {
      "Parameter `index` is required when calling `getClickPositions`."
    }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.GET,
        path = listOf("2", "clicks", "positions"),
        query =
          buildMap {
            put("index", index)
            startDate?.let { put("startDate", it) }
            endDate?.let { put("endDate", it) }
            tags?.let { put("tags", it) }
          },
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * Retrieves the click-through rate (CTR) for all your searches with at least one click event,
   * including a daily breakdown. By default, the analyzed period includes the last eight days
   * including the current day. **There's a difference between a 0 and null CTR when
   * `clickAnalytics` is enabled:** - **Null** means there were no queries: since Algolia didn't
   * receive any events, CTR is null. - **0** mean there _were_ queries but no
   * [click events](https://www.algolia.com/doc/guides/sending-events/getting-started) were
   * received.
   *
   * Required API Key ACLs:
   * - analytics
   *
   * @param index Index name.
   * @param startDate Start date of the period to analyze, in `YYYY-MM-DD` format.
   * @param endDate End date of the period to analyze, in `YYYY-MM-DD` format.
   * @param tags Tags by which to segment the analytics. You can combine multiple tags with `OR` and
   *   `AND`. Tags must be URL-encoded. For more information, see
   *   [Segment your analytics data](https://www.algolia.com/doc/guides/search-analytics/guides/segments).
   * @param requestOptions additional request configuration.
   */
  public suspend fun getClickThroughRate(
    index: String,
    startDate: String? = null,
    endDate: String? = null,
    tags: String? = null,
    requestOptions: RequestOptions? = null,
  ): GetClickThroughRateResponse {
    require(index.isNotBlank()) {
      "Parameter `index` is required when calling `getClickThroughRate`."
    }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.GET,
        path = listOf("2", "clicks", "clickThroughRate"),
        query =
          buildMap {
            put("index", index)
            startDate?.let { put("startDate", it) }
            endDate?.let { put("endDate", it) }
            tags?.let { put("tags", it) }
          },
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * Retrieves the conversion rate (CR) for all your searches with at least one conversion event,
   * including a daily breakdown. By default, the analyzed period includes the last eight days
   * including the current day. **There's a difference between a 0 and null CR when `clickAnalytics`
   * is enabled:** - **Null** means there were no queries: since Algolia didn't receive any events,
   * CR is null. - **0** mean there _were_ queries but no
   * [conversion events](https://www.algolia.com/doc/guides/sending-events/getting-started) were
   * received.
   *
   * Required API Key ACLs:
   * - analytics
   *
   * @param index Index name.
   * @param startDate Start date of the period to analyze, in `YYYY-MM-DD` format.
   * @param endDate End date of the period to analyze, in `YYYY-MM-DD` format.
   * @param tags Tags by which to segment the analytics. You can combine multiple tags with `OR` and
   *   `AND`. Tags must be URL-encoded. For more information, see
   *   [Segment your analytics data](https://www.algolia.com/doc/guides/search-analytics/guides/segments).
   * @param requestOptions additional request configuration.
   */
  public suspend fun getConversionRate(
    index: String,
    startDate: String? = null,
    endDate: String? = null,
    tags: String? = null,
    requestOptions: RequestOptions? = null,
  ): GetConversionRateResponse {
    require(index.isNotBlank()) {
      "Parameter `index` is required when calling `getConversionRate`."
    }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.GET,
        path = listOf("2", "conversions", "conversionRate"),
        query =
          buildMap {
            put("index", index)
            startDate?.let { put("startDate", it) }
            endDate?.let { put("endDate", it) }
            tags?.let { put("tags", it) }
          },
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * Retrieves the fraction of searches that didn't lead to any click within a time range, including
   * a daily breakdown. It also returns the number of tracked searches and tracked searches without
   * clicks. By default, the analyzed period includes the last eight days including the current day.
   *
   * Required API Key ACLs:
   * - analytics
   *
   * @param index Index name.
   * @param startDate Start date of the period to analyze, in `YYYY-MM-DD` format.
   * @param endDate End date of the period to analyze, in `YYYY-MM-DD` format.
   * @param tags Tags by which to segment the analytics. You can combine multiple tags with `OR` and
   *   `AND`. Tags must be URL-encoded. For more information, see
   *   [Segment your analytics data](https://www.algolia.com/doc/guides/search-analytics/guides/segments).
   * @param requestOptions additional request configuration.
   */
  public suspend fun getNoClickRate(
    index: String,
    startDate: String? = null,
    endDate: String? = null,
    tags: String? = null,
    requestOptions: RequestOptions? = null,
  ): GetNoClickRateResponse {
    require(index.isNotBlank()) { "Parameter `index` is required when calling `getNoClickRate`." }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.GET,
        path = listOf("2", "searches", "noClickRate"),
        query =
          buildMap {
            put("index", index)
            startDate?.let { put("startDate", it) }
            endDate?.let { put("endDate", it) }
            tags?.let { put("tags", it) }
          },
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * Retrieves the fraction of searches that didn't return any results within a time range,
   * including a daily breakdown. It also returns the count of searches and searches without results
   * used to compute the rates. By default, the analyzed period includes the last eight days
   * including the current day.
   *
   * Required API Key ACLs:
   * - analytics
   *
   * @param index Index name.
   * @param startDate Start date of the period to analyze, in `YYYY-MM-DD` format.
   * @param endDate End date of the period to analyze, in `YYYY-MM-DD` format.
   * @param tags Tags by which to segment the analytics. You can combine multiple tags with `OR` and
   *   `AND`. Tags must be URL-encoded. For more information, see
   *   [Segment your analytics data](https://www.algolia.com/doc/guides/search-analytics/guides/segments).
   * @param requestOptions additional request configuration.
   */
  public suspend fun getNoResultsRate(
    index: String,
    startDate: String? = null,
    endDate: String? = null,
    tags: String? = null,
    requestOptions: RequestOptions? = null,
  ): GetNoResultsRateResponse {
    require(index.isNotBlank()) { "Parameter `index` is required when calling `getNoResultsRate`." }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.GET,
        path = listOf("2", "searches", "noResultRate"),
        query =
          buildMap {
            put("index", index)
            startDate?.let { put("startDate", it) }
            endDate?.let { put("endDate", it) }
            tags?.let { put("tags", it) }
          },
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * Retrieves the purchase rate for all your searches with at least one purchase event, including a
   * daily breakdown. By default, the analyzed period includes the last eight days including the
   * current day. The rate is the number of purchase conversion events divided by the number of
   * tracked searches. A search is tracked if it returns a query ID (`clickAnalytics` is `true`).
   * This differs from the response's `count`, which shows the overall number of searches, including
   * those where `clickAnalytics` is `false`. **There's a difference between a 0 and null purchase
   * rate when `clickAnalytics` is enabled:** - **Null** means there were no queries: since Algolia
   * didn't receive any events, the purchase rate is null. - **0** mean there _were_ queries but no
   * [purchase conversion events](https://www.algolia.com/doc/guides/sending-events/getting-started)
   * were received.
   *
   * Required API Key ACLs:
   * - analytics
   *
   * @param index Index name.
   * @param startDate Start date of the period to analyze, in `YYYY-MM-DD` format.
   * @param endDate End date of the period to analyze, in `YYYY-MM-DD` format.
   * @param tags Tags by which to segment the analytics. You can combine multiple tags with `OR` and
   *   `AND`. Tags must be URL-encoded. For more information, see
   *   [Segment your analytics data](https://www.algolia.com/doc/guides/search-analytics/guides/segments).
   * @param requestOptions additional request configuration.
   */
  public suspend fun getPurchaseRate(
    index: String,
    startDate: String? = null,
    endDate: String? = null,
    tags: String? = null,
    requestOptions: RequestOptions? = null,
  ): GetPurchaseRateResponse {
    require(index.isNotBlank()) { "Parameter `index` is required when calling `getPurchaseRate`." }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.GET,
        path = listOf("2", "conversions", "purchaseRate"),
        query =
          buildMap {
            put("index", index)
            startDate?.let { put("startDate", it) }
            endDate?.let { put("endDate", it) }
            tags?.let { put("tags", it) }
          },
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * Retrieves revenue-related metrics, such as the total revenue or the average order value. To
   * retrieve revenue-related metrics, send purchase events. By default, the analyzed period
   * includes the last eight days including the current day. Revenue is based on purchase conversion
   * events (a conversion event with an `eventSubtype` attribute of `purchase`). The revenue is the
   * `price` attribute multiplied by the `quantity` attribute for each object in the event's
   * `objectData` array.
   *
   * Required API Key ACLs:
   * - analytics
   *
   * @param index Index name.
   * @param startDate Start date of the period to analyze, in `YYYY-MM-DD` format.
   * @param endDate End date of the period to analyze, in `YYYY-MM-DD` format.
   * @param tags Tags by which to segment the analytics. You can combine multiple tags with `OR` and
   *   `AND`. Tags must be URL-encoded. For more information, see
   *   [Segment your analytics data](https://www.algolia.com/doc/guides/search-analytics/guides/segments).
   * @param requestOptions additional request configuration.
   */
  public suspend fun getRevenue(
    index: String,
    startDate: String? = null,
    endDate: String? = null,
    tags: String? = null,
    requestOptions: RequestOptions? = null,
  ): GetRevenue {
    require(index.isNotBlank()) { "Parameter `index` is required when calling `getRevenue`." }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.GET,
        path = listOf("2", "conversions", "revenue"),
        query =
          buildMap {
            put("index", index)
            startDate?.let { put("startDate", it) }
            endDate?.let { put("endDate", it) }
            tags?.let { put("tags", it) }
          },
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * Retrieves the number of searches within a time range, including a daily breakdown. By default,
   * the analyzed period includes the last eight days including the current day.
   *
   * Required API Key ACLs:
   * - analytics
   *
   * @param index Index name.
   * @param startDate Start date of the period to analyze, in `YYYY-MM-DD` format.
   * @param endDate End date of the period to analyze, in `YYYY-MM-DD` format.
   * @param tags Tags by which to segment the analytics. You can combine multiple tags with `OR` and
   *   `AND`. Tags must be URL-encoded. For more information, see
   *   [Segment your analytics data](https://www.algolia.com/doc/guides/search-analytics/guides/segments).
   * @param requestOptions additional request configuration.
   */
  public suspend fun getSearchesCount(
    index: String,
    startDate: String? = null,
    endDate: String? = null,
    tags: String? = null,
    requestOptions: RequestOptions? = null,
  ): GetSearchesCountResponse {
    require(index.isNotBlank()) { "Parameter `index` is required when calling `getSearchesCount`." }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.GET,
        path = listOf("2", "searches", "count"),
        query =
          buildMap {
            put("index", index)
            startDate?.let { put("startDate", it) }
            endDate?.let { put("endDate", it) }
            tags?.let { put("tags", it) }
          },
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * Retrieves the most popular searches that didn't lead to any clicks, from the 1,000 most
   * frequent searches. For each search, it also returns the number of displayed search results that
   * remained unclicked.
   *
   * Required API Key ACLs:
   * - analytics
   *
   * @param index Index name.
   * @param startDate Start date of the period to analyze, in `YYYY-MM-DD` format.
   * @param endDate End date of the period to analyze, in `YYYY-MM-DD` format.
   * @param limit Number of items to return. (default to 10)
   * @param offset Position of the first item to return. (default to 0)
   * @param tags Tags by which to segment the analytics. You can combine multiple tags with `OR` and
   *   `AND`. Tags must be URL-encoded. For more information, see
   *   [Segment your analytics data](https://www.algolia.com/doc/guides/search-analytics/guides/segments).
   * @param requestOptions additional request configuration.
   */
  public suspend fun getSearchesNoClicks(
    index: String,
    startDate: String? = null,
    endDate: String? = null,
    limit: Int? = null,
    offset: Int? = null,
    tags: String? = null,
    requestOptions: RequestOptions? = null,
  ): GetSearchesNoClicksResponse {
    require(index.isNotBlank()) {
      "Parameter `index` is required when calling `getSearchesNoClicks`."
    }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.GET,
        path = listOf("2", "searches", "noClicks"),
        query =
          buildMap {
            put("index", index)
            startDate?.let { put("startDate", it) }
            endDate?.let { put("endDate", it) }
            limit?.let { put("limit", it) }
            offset?.let { put("offset", it) }
            tags?.let { put("tags", it) }
          },
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * Retrieves the 1,000 most frequent searches that produced zero results.
   *
   * Required API Key ACLs:
   * - analytics
   *
   * @param index Index name.
   * @param startDate Start date of the period to analyze, in `YYYY-MM-DD` format.
   * @param endDate End date of the period to analyze, in `YYYY-MM-DD` format.
   * @param limit Number of items to return. (default to 10)
   * @param offset Position of the first item to return. (default to 0)
   * @param tags Tags by which to segment the analytics. You can combine multiple tags with `OR` and
   *   `AND`. Tags must be URL-encoded. For more information, see
   *   [Segment your analytics data](https://www.algolia.com/doc/guides/search-analytics/guides/segments).
   * @param requestOptions additional request configuration.
   */
  public suspend fun getSearchesNoResults(
    index: String,
    startDate: String? = null,
    endDate: String? = null,
    limit: Int? = null,
    offset: Int? = null,
    tags: String? = null,
    requestOptions: RequestOptions? = null,
  ): GetSearchesNoResultsResponse {
    require(index.isNotBlank()) {
      "Parameter `index` is required when calling `getSearchesNoResults`."
    }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.GET,
        path = listOf("2", "searches", "noResults"),
        query =
          buildMap {
            put("index", index)
            startDate?.let { put("startDate", it) }
            endDate?.let { put("endDate", it) }
            limit?.let { put("limit", it) }
            offset?.let { put("offset", it) }
            tags?.let { put("tags", it) }
          },
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * Retrieves the time when the Analytics data for the specified index was last updated. If the
   * index has been recently created or no search has been performed yet the updated time is `null`.
   * The Analytics data is updated every 5&nbsp;minutes.
   *
   * Required API Key ACLs:
   * - analytics
   *
   * @param index Index name.
   * @param requestOptions additional request configuration.
   */
  public suspend fun getStatus(
    index: String,
    requestOptions: RequestOptions? = null,
  ): GetStatusResponse {
    require(index.isNotBlank()) { "Parameter `index` is required when calling `getStatus`." }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.GET,
        path = listOf("2", "status"),
        query = buildMap { put("index", index) },
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * Retrieves the countries with the most searches in your index.
   *
   * Required API Key ACLs:
   * - analytics
   *
   * @param index Index name.
   * @param startDate Start date of the period to analyze, in `YYYY-MM-DD` format.
   * @param endDate End date of the period to analyze, in `YYYY-MM-DD` format.
   * @param limit Number of items to return. (default to 10)
   * @param offset Position of the first item to return. (default to 0)
   * @param tags Tags by which to segment the analytics. You can combine multiple tags with `OR` and
   *   `AND`. Tags must be URL-encoded. For more information, see
   *   [Segment your analytics data](https://www.algolia.com/doc/guides/search-analytics/guides/segments).
   * @param requestOptions additional request configuration.
   */
  public suspend fun getTopCountries(
    index: String,
    startDate: String? = null,
    endDate: String? = null,
    limit: Int? = null,
    offset: Int? = null,
    tags: String? = null,
    requestOptions: RequestOptions? = null,
  ): GetTopCountriesResponse {
    require(index.isNotBlank()) { "Parameter `index` is required when calling `getTopCountries`." }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.GET,
        path = listOf("2", "countries"),
        query =
          buildMap {
            put("index", index)
            startDate?.let { put("startDate", it) }
            endDate?.let { put("endDate", it) }
            limit?.let { put("limit", it) }
            offset?.let { put("offset", it) }
            tags?.let { put("tags", it) }
          },
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * Retrieves the 1,000 most frequently used filter attributes. These are attributes of your
   * records that you included in the `attributesForFaceting` setting.
   *
   * Required API Key ACLs:
   * - analytics
   *
   * @param index Index name.
   * @param search Search query.
   * @param startDate Start date of the period to analyze, in `YYYY-MM-DD` format.
   * @param endDate End date of the period to analyze, in `YYYY-MM-DD` format.
   * @param limit Number of items to return. (default to 10)
   * @param offset Position of the first item to return. (default to 0)
   * @param tags Tags by which to segment the analytics. You can combine multiple tags with `OR` and
   *   `AND`. Tags must be URL-encoded. For more information, see
   *   [Segment your analytics data](https://www.algolia.com/doc/guides/search-analytics/guides/segments).
   * @param requestOptions additional request configuration.
   */
  public suspend fun getTopFilterAttributes(
    index: String,
    search: String? = null,
    startDate: String? = null,
    endDate: String? = null,
    limit: Int? = null,
    offset: Int? = null,
    tags: String? = null,
    requestOptions: RequestOptions? = null,
  ): GetTopFilterAttributesResponse {
    require(index.isNotBlank()) {
      "Parameter `index` is required when calling `getTopFilterAttributes`."
    }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.GET,
        path = listOf("2", "filters"),
        query =
          buildMap {
            put("index", index)
            search?.let { put("search", it) }
            startDate?.let { put("startDate", it) }
            endDate?.let { put("endDate", it) }
            limit?.let { put("limit", it) }
            offset?.let { put("offset", it) }
            tags?.let { put("tags", it) }
          },
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * Retrieves the 1,000 most frequent filter (facet) values for a filter attribute. These are
   * attributes of your records that you included in the `attributesForFaceting` setting.
   *
   * Required API Key ACLs:
   * - analytics
   *
   * @param attribute Attribute name.
   * @param index Index name.
   * @param search Search query.
   * @param startDate Start date of the period to analyze, in `YYYY-MM-DD` format.
   * @param endDate End date of the period to analyze, in `YYYY-MM-DD` format.
   * @param limit Number of items to return. (default to 10)
   * @param offset Position of the first item to return. (default to 0)
   * @param tags Tags by which to segment the analytics. You can combine multiple tags with `OR` and
   *   `AND`. Tags must be URL-encoded. For more information, see
   *   [Segment your analytics data](https://www.algolia.com/doc/guides/search-analytics/guides/segments).
   * @param requestOptions additional request configuration.
   */
  public suspend fun getTopFilterForAttribute(
    attribute: String,
    index: String,
    search: String? = null,
    startDate: String? = null,
    endDate: String? = null,
    limit: Int? = null,
    offset: Int? = null,
    tags: String? = null,
    requestOptions: RequestOptions? = null,
  ): GetTopFilterForAttributeResponse {
    require(attribute.isNotBlank()) {
      "Parameter `attribute` is required when calling `getTopFilterForAttribute`."
    }
    require(index.isNotBlank()) {
      "Parameter `index` is required when calling `getTopFilterForAttribute`."
    }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.GET,
        path = listOf("2", "filters", "$attribute"),
        query =
          buildMap {
            put("index", index)
            search?.let { put("search", it) }
            startDate?.let { put("startDate", it) }
            endDate?.let { put("endDate", it) }
            limit?.let { put("limit", it) }
            offset?.let { put("offset", it) }
            tags?.let { put("tags", it) }
          },
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * Retrieves the 1,000 most frequently used filters for a search that didn't return any results.
   * To get the most frequent searches without results, use the
   * [Retrieve searches without results](https://www.algolia.com/doc/rest-api/analytics/get-searches-no-results)
   * operation.
   *
   * Required API Key ACLs:
   * - analytics
   *
   * @param index Index name.
   * @param search Search query.
   * @param startDate Start date of the period to analyze, in `YYYY-MM-DD` format.
   * @param endDate End date of the period to analyze, in `YYYY-MM-DD` format.
   * @param limit Number of items to return. (default to 10)
   * @param offset Position of the first item to return. (default to 0)
   * @param tags Tags by which to segment the analytics. You can combine multiple tags with `OR` and
   *   `AND`. Tags must be URL-encoded. For more information, see
   *   [Segment your analytics data](https://www.algolia.com/doc/guides/search-analytics/guides/segments).
   * @param requestOptions additional request configuration.
   */
  public suspend fun getTopFiltersNoResults(
    index: String,
    search: String? = null,
    startDate: String? = null,
    endDate: String? = null,
    limit: Int? = null,
    offset: Int? = null,
    tags: String? = null,
    requestOptions: RequestOptions? = null,
  ): GetTopFiltersNoResultsResponse {
    require(index.isNotBlank()) {
      "Parameter `index` is required when calling `getTopFiltersNoResults`."
    }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.GET,
        path = listOf("2", "filters", "noResults"),
        query =
          buildMap {
            put("index", index)
            search?.let { put("search", it) }
            startDate?.let { put("startDate", it) }
            endDate?.let { put("endDate", it) }
            limit?.let { put("limit", it) }
            offset?.let { put("offset", it) }
            tags?.let { put("tags", it) }
          },
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * Retrieves the object IDs of the 1,000 most frequent search results. If you set the
   * `clickAnalytics` query parameter to true, the response also includes: - Tracked searches count.
   * Tracked searches are Search API requests with the `clickAnalytics` parameter set to `true`.
   * This differs from the response's `count`, which shows the overall number of searches, including
   * those where `clickAnalytics` is `false`. - Click count - Click-through rate (CTR) - Conversion
   * count - Conversion rate (CR) - Average click position If you set the `revenueAnalytics`
   * parameter to `true`, the response also includes: - Add-to-cart count - Add-to-cart rate
   * (ATCR) - Purchase count - Purchase rate - Revenue details for each currency **There's a
   * difference between 0% rates and null rates:** - **Null** means there were no queries: since
   * Algolia didn't receive any events, the rates (CTR, CR, ATCR, purchase rate) are null. - **0%
   * rates** mean there _were_ queries but no
   * [click or conversion events](https://www.algolia.com/doc/guides/sending-events/getting-started)
   * were received.
   *
   * Required API Key ACLs:
   * - analytics
   *
   * @param index Index name.
   * @param search Search query.
   * @param clickAnalytics Whether to include metrics related to click and conversion events in the
   *   response. (default to false)
   * @param revenueAnalytics Whether to include metrics related to revenue events in the response.
   *   (default to false)
   * @param startDate Start date of the period to analyze, in `YYYY-MM-DD` format.
   * @param endDate End date of the period to analyze, in `YYYY-MM-DD` format.
   * @param limit Number of items to return. (default to 10)
   * @param offset Position of the first item to return. (default to 0)
   * @param tags Tags by which to segment the analytics. You can combine multiple tags with `OR` and
   *   `AND`. Tags must be URL-encoded. For more information, see
   *   [Segment your analytics data](https://www.algolia.com/doc/guides/search-analytics/guides/segments).
   * @param requestOptions additional request configuration.
   */
  public suspend fun getTopHits(
    index: String,
    search: String? = null,
    clickAnalytics: Boolean? = null,
    revenueAnalytics: Boolean? = null,
    startDate: String? = null,
    endDate: String? = null,
    limit: Int? = null,
    offset: Int? = null,
    tags: String? = null,
    requestOptions: RequestOptions? = null,
  ): GetTopHitsResponse {
    require(index.isNotBlank()) { "Parameter `index` is required when calling `getTopHits`." }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.GET,
        path = listOf("2", "hits"),
        query =
          buildMap {
            put("index", index)
            search?.let { put("search", it) }
            clickAnalytics?.let { put("clickAnalytics", it) }
            revenueAnalytics?.let { put("revenueAnalytics", it) }
            startDate?.let { put("startDate", it) }
            endDate?.let { put("endDate", it) }
            limit?.let { put("limit", it) }
            offset?.let { put("offset", it) }
            tags?.let { put("tags", it) }
          },
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * Returns the most popular searches. For each search, it also includes the average number of
   * hits. If you set the `clickAnalytics` query parameter to `true`, the response also includes -
   * Tracked searches count. Tracked searches are Search API requests with the `clickAnalytics`
   * parameter set to `true`. This differs from the response's `count`, which shows the overall
   * number of searches, including those where `clickAnalytics` is `false`. - Click count -
   * Click-through rate (CTR) - Conversion count - Conversion rate (CR) - Average click position If
   * you set the `revenueAnalytics` query parameter to `true`, the response also includes: -
   * Add-to-cart count - Add-to-cart rate (ATCR) - Purchase count - Purchase rate - Revenue details
   * for each currency **There's a difference between 0% rates and null rates:** - **Null** means
   * there were no queries: since Algolia didn't receive any events, the rates (CTR, CR, ATCR,
   * purchase rate) are null. - **0% rates** mean there _were_ queries but no
   * [click or conversion events](https://www.algolia.com/doc/guides/sending-events/getting-started)
   * were received.
   *
   * Required API Key ACLs:
   * - analytics
   *
   * @param index Index name.
   * @param clickAnalytics Whether to include metrics related to click and conversion events in the
   *   response. (default to false)
   * @param revenueAnalytics Whether to include metrics related to revenue events in the response.
   *   (default to false)
   * @param startDate Start date of the period to analyze, in `YYYY-MM-DD` format.
   * @param endDate End date of the period to analyze, in `YYYY-MM-DD` format.
   * @param orderBy Attribute by which to order the response items. If the `clickAnalytics`
   *   parameter is false, only `searchCount` is available. (default to OrderBy.searchCount)
   * @param direction Sorting direction of the results: ascending or descending. (default to
   *   Direction.asc)
   * @param limit Number of items to return. (default to 10)
   * @param offset Position of the first item to return. (default to 0)
   * @param tags Tags by which to segment the analytics. You can combine multiple tags with `OR` and
   *   `AND`. Tags must be URL-encoded. For more information, see
   *   [Segment your analytics data](https://www.algolia.com/doc/guides/search-analytics/guides/segments).
   * @param requestOptions additional request configuration.
   */
  public suspend fun getTopSearches(
    index: String,
    clickAnalytics: Boolean? = null,
    revenueAnalytics: Boolean? = null,
    startDate: String? = null,
    endDate: String? = null,
    orderBy: OrderBy? = null,
    direction: Direction? = null,
    limit: Int? = null,
    offset: Int? = null,
    tags: String? = null,
    requestOptions: RequestOptions? = null,
  ): GetTopSearchesResponse {
    require(index.isNotBlank()) { "Parameter `index` is required when calling `getTopSearches`." }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.GET,
        path = listOf("2", "searches"),
        query =
          buildMap {
            put("index", index)
            clickAnalytics?.let { put("clickAnalytics", it) }
            revenueAnalytics?.let { put("revenueAnalytics", it) }
            startDate?.let { put("startDate", it) }
            endDate?.let { put("endDate", it) }
            orderBy?.let { put("orderBy", it) }
            direction?.let { put("direction", it) }
            limit?.let { put("limit", it) }
            offset?.let { put("offset", it) }
            tags?.let { put("tags", it) }
          },
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }

  /**
   * Retrieves the number of unique users within a time range, including a daily breakdown. Since it
   * returns the number of unique users, the sum of the daily values might be different from the
   * total number. By default: - Algolia distinguishes search users by their IP address, _unless_
   * you include a pseudonymous user identifier in your search requests with the `userToken` API
   * parameter or `x-algolia-usertoken` request header. - The analyzed period includes the last
   * eight days including the current day.
   *
   * Required API Key ACLs:
   * - analytics
   *
   * @param index Index name.
   * @param startDate Start date of the period to analyze, in `YYYY-MM-DD` format.
   * @param endDate End date of the period to analyze, in `YYYY-MM-DD` format.
   * @param tags Tags by which to segment the analytics. You can combine multiple tags with `OR` and
   *   `AND`. Tags must be URL-encoded. For more information, see
   *   [Segment your analytics data](https://www.algolia.com/doc/guides/search-analytics/guides/segments).
   * @param requestOptions additional request configuration.
   */
  public suspend fun getUsersCount(
    index: String,
    startDate: String? = null,
    endDate: String? = null,
    tags: String? = null,
    requestOptions: RequestOptions? = null,
  ): GetUsersCountResponse {
    require(index.isNotBlank()) { "Parameter `index` is required when calling `getUsersCount`." }
    val requestConfig =
      RequestConfig(
        method = RequestMethod.GET,
        path = listOf("2", "users", "count"),
        query =
          buildMap {
            put("index", index)
            startDate?.let { put("startDate", it) }
            endDate?.let { put("endDate", it) }
            tags?.let { put("tags", it) }
          },
      )
    return requester.execute(requestConfig = requestConfig, requestOptions = requestOptions)
  }
}
